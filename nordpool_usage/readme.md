# Usage of the Nordpool entity

## Setup

Install the Nordpool integration

Set it up using the right setup, see documentation.

I add this to get the correct grid cost included:
```
{% if now().hour >=6 and now().hour <22 %}
    {{0.4382|float}}
{% else %}
    {{0.3624|float}}
{% endif %}
```

After adding, find the nordpool entity, click on the name, the cogs, and set the Entitiy ID to be sensor.nordpool (that is, remove that odd name that is autogenerated), this simplifies things later.

## Graphs


Today:
```
type: custom:apexcharts-card
graph_span: 24h
header:
  title: Strømpris idag (øre/kWh)
  show: true
span:
  start: day
now:
  show: true
series:
  - entity: sensor.nordpool
    type: line
    curve: stepline
    data_generator: |
      return entity.attributes.raw_today.map((start, index) => {
        return [new Date(start["start"]).getTime(), entity.attributes.raw_today[index]["value"]];
      });
```

Tomorrow:
```
type: custom:apexcharts-card
graph_span: 24h
header:
  title: Strømpris i morgen (kr/kWh)
  show: true
span:
  start: day
  offset: +1d
series:
  - entity: sensor.nordpool
    type: line
    curve: stepline
    data_generator: |
      return entity.attributes.raw_tomorrow.map((start, index) => {
        return [new Date(start["start"]).getTime(), entity.attributes.raw_tomorrow[index]["value"]];
      });
```

## Turn on/off thigns

Go to Automation->Blueprints and add https://github.com/KodeZ/hass_stuff/blob/main/blueprints/nordpool_on_off.yaml


